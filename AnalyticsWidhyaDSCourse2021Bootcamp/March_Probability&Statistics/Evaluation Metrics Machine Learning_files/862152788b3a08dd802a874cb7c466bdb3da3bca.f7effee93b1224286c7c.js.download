(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"8/ze":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="."},"8v8i":function(e,t,r){"use strict";var n,o,i,a,s,c;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"c",(function(){return c})),function(e){e.Create="CREATE",e.Move="MOVE",e.Delete="DELETE",e.Modify="MODIFY"}(n||(n={})),function(e){e.Local="LOCAL",e.Container="CONTAINER"}(o||(o={})),function(e){e.File="FILE",e.Directory="DIRECTORY"}(i||(i={})),function(e){e.NotFound="NOT_FOUND",e.AlreadyExists="ALREADY_EXIST",e.NotDirectory="NOT_DIRECTORY",e.IsDirectory="IS_DIRECTORY"}(a||(a={})),function(e){e.Offline="OFFLINE",e.Loading="LOADING",e.Syncing="SYNCING",e.Clean="CLEAN",e.Error="ERROR"}(s||(s={})),function(e){e.Dirty="DIRTY",e.Syncing="SYNCING",e.Clean="CLEAN"}(c||(c={}))},HtvZ:function(e,t,r){"use strict";var n=r("p0XB");r("hfKm")(t,"__esModule",{value:!0});var o=r("Z5Wq"),i=function(e){if(!n(e))throw Error("Op must be an array of components");for(var t=null,r=0;r<e.length;r++){var o=e[r];switch(typeof o){case"object":if(!("number"===typeof o.d&&o.d>0))throw Error("Object components must be deletes of size > 0");break;case"string":if(!(o.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(o>0))throw Error("Skip components must be >0");if("number"===typeof t)throw Error("Adjacent skip components should be combined")}t=o}if("number"===typeof t)throw Error("Op has a trailing skip")},a=function(e){for(var t=[],r=s(t),n=0;n<e.length;n++)r(e[n]);return l(t)},s=function(e){return function(t){t&&0!==t.d&&(0===e.length?e.push(t):typeof t===typeof e[e.length-1]?"object"===typeof t?e[e.length-1].d+=t.d:e[e.length-1]+=t:e.push(t))}},c=function(e){return"number"===typeof e?e:"string"===typeof e?o.strPosToUni(e):e.d},u=function(e){var t=0,r=0;return{take:function(n,i){if(t===e.length)return-1===n?null:n;var a,s=e[t];if("number"===typeof s)return-1===n||s-r<=n?(a=s-r,++t,r=0,a):(r+=n,n);if("string"===typeof s){if(-1===n||"i"===i||o.strPosToUni(s.slice(r))<=n)return a=s.slice(r),++t,r=0,a;var c=r+o.uniToStrPos(s.slice(r),n);return a=s.slice(r,c),r=c,a}return-1===n||"d"===i||s.d-r<=n?(a={d:s.d-r},++t,r=0,a):(r+=n,{d:n})},peek:function(){return e[t]}}},l=function(e){return e.length>0&&"number"===typeof e[e.length-1]&&e.pop(),e};function f(e,t,r){if("left"!==r&&"right"!==r)throw Error("side ("+r+") must be 'left' or 'right'");i(e),i(t);for(var n,a=[],f=s(a),p=u(e),d=p.take,h=p.peek,b=0;b<t.length;b++){var v=t[b],g=void 0,m=void 0;switch(typeof v){case"number":for(g=v;g>0;)f(m=d(g,"i")),"string"!==typeof m&&(g-=c(m));break;case"string":"left"===r&&"string"===typeof h()&&f(d(-1)),f(o.strPosToUni(v));break;case"object":for(g=v.d;g>0;)switch(typeof(m=d(g,"i"))){case"number":g-=m;break;case"string":f(m);break;case"object":g-=m.d}}}for(;n=d(-1);)f(n);return l(a)}function p(e,t){i(e),i(t);for(var r,n=[],a=s(n),f=u(e).take,p=0;p<t.length;p++){var d=t[p],h=void 0,b=void 0;switch(typeof d){case"number":for(h=d;h>0;)a(b=f(h,"d")),"object"!==typeof b&&(h-=c(b));break;case"string":a(d);break;case"object":for(h=d.d;h>0;)switch(typeof(b=f(h,"d"))){case"number":a({d:b}),h-=b;break;case"string":h-=o.strPosToUni(b);break;case"object":a(b)}}}for(;r=f(-1);)a(r);return l(n)}var d=function(e,t){for(var r=0,n=0;n<t.length&&e>r;n++){var i=t[n];switch(typeof i){case"number":r+=i;break;case"string":var a=o.strPosToUni(i);r+=a,e+=a;break;case"object":e-=Math.min(i.d,e-r)}}return e},h=function(e,t){return"number"===typeof e?d(e,t):e.map((function(e){return d(e,t)}))};t.default=function(e){return{name:"text-unicode",uri:"http://sharejs.org/types/text-unicode",trim:l,normalize:a,checkOp:i,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof t)throw Error("Initial data must be a string");return e.create(t)},apply:function(t,r){i(r);for(var n=e.builder(t),o=0;o<r.length;o++){var a=r[o];switch(typeof a){case"number":n.skip(a);break;case"string":n.append(a);break;case"object":n.del(a.d)}}return n.build()},transform:f,compose:p,transformPosition:d,transformSelection:h}}},"LI1+":function(e,t,r){"use strict";var n=r("doui"),o=r("MX0m"),i=r.n(o),a=r("q1tI"),s=r("XXOK"),c=r.n(s),u=r("HADy"),l=r("4A0d");var f=r("YuJD"),p=r("up5I"),d=r("DgdK"),h=r("5zsw"),b=r("xom/");r.d(t,"c",(function(){return g})),r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y}));var v=a.createElement;t.d=a.forwardRef((function(e,t){var r=e.runner,o=e.packager,s=e.languageHeader,p=function(e){var t=e.runner,r=e.packager,o=e.languageHeader,i=Object(l.a)(),s=Object(n.a)(i,2),f=s[0],p=s[1],d=a.useState(""),h=Object(n.a)(d,2),b=h[0],v=h[1];return a.useEffect((function(){if(!f)return t.onOutput((function(e){return v((function(t){return t+e}))}))}),[f,t,v]),a.useEffect((function(){if(!f&&r)return r.onOutput((function(e){return v((function(t){return t+e.replace(/\n/g,"\n\r")}))}))}),[f,r,v]),a.useEffect((function(){if(f&&r)return r.onOutput((function(e){return f.write(e.replace(/\n/g,"\n\r"))}))}),[f,r]),a.useEffect((function(){b&&f&&(f.write(b),v(""))}),[f,b]),a.useEffect((function(){o&&v((function(e){return e+"".concat(o.replace(/\n/g,"\n\r"),"\n\r")}))}),[o,v]),a.useEffect((function(){if(f){var e=function(){t.getRunState()!==u.b.OFFLINE&&t.resizeTerminal(f.getSize())},r=[];r.push(f.onResize(e).dispose);var n=[];r.push(f.onData((function(e){t.getRunState()!==u.b.OFFLINE?t.sendInput(e):n.push(e)})).dispose),r.push(t.onOutput((function(e){f.write(e)})));var o=!1;return r.push(t.onStateChanged((function(r){if(r!==u.b.OFFLINE){if(o||(e(),o=!0),n.length){var i=!0,a=!1,s=void 0;try{for(var l,f=c()(n);!(i=(l=f.next()).done);i=!0){var p=l.value;t.sendInput(p)}}catch(d){a=!0,s=d}finally{try{i||null==f.return||f.return()}finally{if(a)throw s}}n=[]}}else o=!1}))),t.getRunState()!==u.b.OFFLINE&&(e(),o=!0),function(){r.forEach((function(e){return e()}))}}}),[f,t]),[f,p]}({runner:r,packager:o,languageHeader:s}),d=Object(n.a)(p,2),h=d[0],x=d[1],w=a.useState(!1),k=Object(n.a)(w,2),E=k[0],O=k[1];return a.useImperativeHandle(t,(function(){return{clear:function(){h&&h.clear()}}})),v("div",{onKeyDown:function(e){"f"===e.key&&Object(f.b)(e)&&!e.shiftKey&&(O(!0),e.preventDefault())},className:"jsx-3520147872 replit-ui-theme-root dark terminal"},v("div",{className:"jsx-3520147872 controls"},v(b.a,{align:"center",wrap:"nowrap"},E&&h?v(g,{findPrevious:h.findPrevious,findNext:h.findNext,exit:function(){return O(!1)}}):v(y,{onClick:function(){return O(!0)}}),v(m,{onClick:function(){h&&(h.clear(),s&&h.write("".concat(s.replace(/\n/g,"\n\r"),"\n\r")),h.focus())}}))),v("div",{ref:x,className:"jsx-3520147872 xterm-container"}),v(i.a,{id:"3520147872"},[".terminal.jsx-3520147872{height:100%;width:100%;position:relative;background-color:var(--color-brand-dark-blue);border-radius:var(--border-radius-1);}",".controls.jsx-3520147872{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;position:absolute;top:var(--spacing-1);right:var(--spacing-1);z-index:100;min-height:30px;}",".xterm-container.jsx-3520147872{height:100%;overflow:auto;}",".xterm-container.jsx-3520147872 .xterm{height:100%;padding:var(--spacing-2) var(--spacing-2) var(--spacing-half);}",".xterm-container.jsx-3520147872 .xterm-viewport{overflow-y:auto !important;border-radius:var(--border-radius-1);}"]))}));function g(e){var t=e.findNext,r=e.findPrevious,o=e.exit,s=a.useRef(null),c=a.useState(""),u=Object(n.a)(c,2),l=u[0],f=u[1];a.useEffect((function(){s.current&&s.current.focus()}),[]);return v("div",{className:"jsx-2844282466 search"},v("input",{ref:s,placeholder:"Find",value:l,onChange:function(e){return f(e.target.value)},onKeyDown:function(e){return function(e){"Escape"!==e.key?"Enter"===e.key&&(e.shiftKey?r(l):t(l)):o()}(e)},className:"jsx-2844282466"}),v(p.a,{size:"small",onClick:function(){return t(l)}},"Next"),v(p.a,{size:"small",onClick:function(){return r(l)}},"Previous"),v(p.a,{size:"small",onClick:o},"Exit"),v(i.a,{id:"2844282466"},[".search.jsx-2844282466{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:30px;}","input.jsx-2844282466{padding:4px var(--spacing-1) var(--spacing-half);background-color:var(--color-background-1);color:var(--color-white);height:24px;width:85px;border:none;border-radius:var(--border-radius-1);box-shadow:none;}","input.jsx-2844282466::-webkit-input-placeholder{color:var(--color-white);}","input.jsx-2844282466::-moz-placeholder{color:var(--color-white);}","input.jsx-2844282466:-ms-input-placeholder{color:var(--color-white);}","input.jsx-2844282466::placeholder{color:var(--color-white);}","input.jsx-2844282466:focus{outline:none;border:var(--color-primary-1);}","input.jsx-2844282466,.search button{margin:0 var(--spacing-half);}"]))}var m=function(e){var t=e.onClick;return v("button",{"aria-label":"Clear","data-microtip-position":"bottom-left",role:"tooltip",onClick:t,className:"jsx-616918215"},v(h.a,{size:"medium"}),v(i.a,{id:"616918215"},["button.jsx-616918215{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:var(--border-radius-1);padding:var(--spacing-half);background-color:var(--color-brand-dark-blue);color:var(--color-foreground-1);-webkit-transition:background-color 0.2s;transition:background-color 0.2s;border:none;cursor:pointer;}","button.jsx-616918215:hover{background-color:var(--color-control-2);}","button.jsx-616918215:focus{outline:none;}"]))},y=function(e){var t=e.onClick;return v("button",{"aria-label":"Search","data-microtip-position":"bottom",role:"tooltip",onClick:t,className:"jsx-616918215"},v(d.a,{size:"medium"}),v(i.a,{id:"616918215"},["button.jsx-616918215{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:var(--border-radius-1);padding:var(--spacing-half);background-color:var(--color-brand-dark-blue);color:var(--color-foreground-1);-webkit-transition:background-color 0.2s;transition:background-color 0.2s;border:none;cursor:pointer;}","button.jsx-616918215:hover{background-color:var(--color-control-2);}","button.jsx-616918215:focus{outline:none;}"]))}},NuhN:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return f})),r.d(t,"f",(function(){return p}));var n=r("pLtp"),o=r.n(n),i=function(e){return""===e};function a(e){return i(e)||e.endsWith("/")?e:e+"/"}function s(e,t){return o()(e).filter((function(e){return c(t,e)}))}function c(e,t){return t!==e&&t.startsWith(a(e))}function u(e,t){return o()(e).filter((function(e){return l(t,e)}))}function l(e,t){if(!c(e,t))return!1;var r=a(e),n=t.slice(r.length);return n.endsWith("/")&&(n=n.slice(-1)),!n.includes("/")}function f(e,t,r){var n=s(e,t).map((function(e){return[e,p(t,r,e)]}));return"undefined"!==typeof e[t]&&n.unshift([t,r]),n}function p(e,t,r){var n=a(e);return a(t)+r.slice(n.length)}},VOEV:function(e,t,r){"use strict";var n=r("hfKm"),o=r.n(n),i=r("2Eek"),a=r.n(i),s=r("XoMD"),c=r.n(s),u=r("Jo+v"),l=r.n(u),f=r("4mXO"),p=r.n(f),d=r("ln6h"),h=r.n(d),b=r("vYYK"),v=r("XXOK"),g=r.n(v),m=r("dfwq"),y=r("pLtp"),x=r.n(y),w=r("eVuF"),k=r.n(w),E=r("gfZM"),O=r("8v8i"),C=r("dI/k"),j=r("NuhN"),T=r("8/ze"),D=r("5/z4"),S=r("Cg2A"),N=r.n(S),R=r("9Jkg"),F=r.n(R),_=r("0iUn"),I=r("sLSF"),L=r("MI3g"),A=r("a7VT"),U=r("AT/M"),P=r("Tit0"),M=r("+qE3"),B=r("cC09"),z=r("cHV+"),q=r("9/5/"),V=r.n(q),Y=r("Z5Wq"),X=r("zgDP"),H=r("doui"),K=r("p0XB"),G=r.n(K),W=r("Yk1I"),Z=r.n(W),J=function(e){return e.length>0&&"number"===typeof e[e.length-1]&&e.pop(),e},Q=function(e){if(!G()(e))throw Error("Op must be an array of components");for(var t=null,r=0;r<e.length;r++){var n=e[r];switch(typeof n){case"object":if(!("number"===typeof n.d&&n.d>0))throw Error("Object components must be deletes of size > 0");break;case"string":if(!(n.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(n>0))throw Error("Skip components must be >0");if("number"===typeof t)throw Error("Adjacent skip components should be combined")}t=n}if("number"===typeof t)throw Error("Op has a trailing skip")},$=function(e){return"number"===typeof e?e:"string"===typeof e?e.length:e.d};function ee(e,t){Q(e),Q(t);for(var r,n,o=[],i=(r=o,function(e){e&&0!==e.d&&(0===r.length?r.push(e):typeof e===typeof r[r.length-1]?"object"===typeof e?r[r.length-1].d+=e.d:r[r.length-1]+=e:r.push(e))}),a=function(e){var t=0,r=0;return[function(n,o){if(t===e.length)return-1===n?null:n;var i,a=e[t];return"number"===typeof a?-1===n||a-r<=n?(i=a-r,++t,r=0,i):(r+=n,n):"string"===typeof a?-1===n||"i"===o||a.length-r<=n?(i=a.slice(r),++t,r=0,i):(i=a.slice(r,r+n),r+=n,i):-1===n||"d"===o||a.d-r<=n?(i={d:a.d-r},++t,r=0,i):(r+=n,{d:n})},function(){return e[t]}]}(e)[0],s=0;s<t.length;s++){var c=t[s],u=void 0,l=void 0;switch(typeof c){case"number":for(u=c;u>0;)(l=a(u,"d"))&&i(l),"object"!==typeof l&&(u-=$(l));break;case"string":i(c);break;case"object":for(u=c.d;u>0;)switch(typeof(l=a(u,"d"))){case"number":i({d:l}),u-=l;break;case"string":u-=l.length;break;case"object":l&&i(l)}}}for(;n=a(-1);)i(n);return J(o)}function te(e,t){if(e===t)return[];var r=[],n=function(e){e&&0!==e.d&&(0===r.length?r.push(e):typeof e===typeof r[r.length-1]?"object"===typeof e?r[r.length-1].d+=e.d:r[r.length-1]+=e:r.push(e))};return Z()(e,t).forEach((function(e){var t=Object(H.a)(e,2),r=t[0],o=t[1];switch(r){case Z.a.INSERT:n(o);break;case Z.a.DELETE:n({d:o.length});break;case Z.a.EQUAL:n(o.length)}})),r.length>0&&"number"===typeof r[r.length-1]&&r.pop(),r}function re(e,t){var r=x()(e);if(p.a){var n=p()(e);t&&(n=n.filter((function(t){return l()(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){Object(b.a)(e,t,r[t])})):c.a?a()(e,c()(r)):re(Object(r)).forEach((function(t){o()(e,t,l()(r,t))}))}return e}function oe(e){return e.map((function(e){if("delete"in e&&e.delete)return{d:e.delete};if("skip"in e&&e.skip)return e.skip;if("insert"in e&&"string"===typeof e.insert)return e.insert;throw new Error("Unexpected op type")}))}var ie=function(e){function t(e,r){var n;return Object(_.a)(this,t),n=Object(L.a)(this,Object(A.a)(t).call(this)),Object(b.a)(Object(U.a)(n),"linkedFile",void 0),Object(b.a)(Object(U.a)(n),"channel",void 0),Object(b.a)(Object(U.a)(n),"destroy",void 0),Object(b.a)(Object(U.a)(n),"pending",void 0),Object(b.a)(Object(U.a)(n),"inflight",void 0),Object(b.a)(Object(U.a)(n),"inflightOpsPromise",void 0),Object(b.a)(Object(U.a)(n),"version",void 0),Object(b.a)(Object(U.a)(n),"otContents",void 0),Object(b.a)(Object(U.a)(n),"pendingCursors",void 0),Object(b.a)(Object(U.a)(n),"flushedCursorIds",void 0),Object(b.a)(Object(U.a)(n),"user",void 0),Object(b.a)(Object(U.a)(n),"debounceSend",void 0),Object(b.a)(Object(U.a)(n),"debounceCommit",void 0),Object(b.a)(Object(U.a)(n),"isCommitting",void 0),Object(b.a)(Object(U.a)(n),"resolveStatusOp",void 0),Object(b.a)(Object(U.a)(n),"isReconnecting",void 0),Object(b.a)(Object(U.a)(n),"uncommittedOps",void 0),Object(b.a)(Object(U.a)(n),"hasUncommittedMultiplayerOps",void 0),Object(b.a)(Object(U.a)(n),"committedVersion",void 0),Object(b.a)(Object(U.a)(n),"committedContent",void 0),Object(b.a)(Object(U.a)(n),"bufferedReconnectingOps",void 0),Object(b.a)(Object(U.a)(n),"didEditOffline",void 0),Object(b.a)(Object(U.a)(n),"reconnectTrackedData",void 0),Object(b.a)(Object(U.a)(n),"timeDisconnected",void 0),Object(b.a)(Object(U.a)(n),"writeOps",(function(e){if(!n.channel&&!n.isReconnecting)throw new Error("Trying to send changes before ever coming online");n.isReconnecting&&(n.didEditOffline=!0);var t="";try{t=n.getLocalContent()}catch(h){return void n.emit("error",new Error("OT Error: unable to get local content"),{originalError:h})}var r=[],o=0,i=!0,a=!1,s=void 0;try{for(var c,u=g()(e);!(i=(c=u.next()).done);i=!0){var l=c.value;switch(typeof l){case"number":o+=l;break;case"string":var f=Object(Y.strPosToUni)(t,o);r=f>0?z.type.compose(r,[f,l]):z.type.compose(r,[l]),o+=l.length;break;case"object":var p=Object(Y.strPosToUni)(t,o),d=Object(Y.strPosToUni)(t,o+l.d)-p;r=p>0?z.type.compose(r,[p,{d:d}]):z.type.compose(r,[{d:d}]);break;default:return void n.emit("error",new Error("OT Error: unknown op type"))}}}catch(b){a=!0,s=b}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}n.pending=z.type.compose(n.pending,r),0!==n.pending.length?n.emit("fileDirty"):n.isCommitting&&n.emit("commitStart");try{n.getLocalContent()}catch(h){n.emit("error",new Error("OT Error: unable to get local content"),{originalError:h})}n.debounceSend()})),Object(b.a)(Object(U.a)(n),"updateCursors",(function(e){n.pendingCursors=e,n.debounceSend()})),Object(b.a)(Object(U.a)(n),"isClean",(function(){return n.committedVersion===n.version&&0===n.inflight.length&&0===n.pending.length})),Object(b.a)(Object(U.a)(n),"sendOps",(function(){if(n.channel&&"open"===n.channel.status&&!n.isReconnecting&&!(n.inflight.length>0)){if(0!==n.pending.length){var e=n.pending.map((function(e){return"object"===typeof e?{delete:e.d}:"number"===typeof e?{skip:e}:{insert:e}}));n.inflight=n.pending,n.pending=[],n.inflightOpsPromise=n.channel.request({ot:{spookyVersion:n.version,ops:e}}),n.inflightOpsPromise.then((function(t){t.error&&n.emit("error",new Error("OT Error: error accepting packet"),{originalError:t.error,ops:e})}))}if(0!==n.pendingCursors.length){var t=!0,r=!1,o=void 0;try{for(var i,a=g()(n.flushedCursorIds);!(t=(i=a.next()).done);t=!0){var s=i.value;n.channel.send({otDeleteCursor:{id:s}})}}catch(b){r=!0,o=b}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}n.flushedCursorIds=[];var c=!0,u=!1,l=void 0;try{for(var f,p=g()(n.pendingCursors);!(c=(f=p.next()).done);c=!0){var d=f.value,h=Number(Math.random().toString().split(".")[1]).toString(36);n.flushedCursorIds.push(h),n.channel.send({otNewCursor:ne({id:h,user:n.user},d)})}}catch(b){u=!0,l=b}finally{try{c||null==p.return||p.return()}finally{if(u)throw l}}n.pendingCursors=[]}}})),Object(b.a)(Object(U.a)(n),"handlePacket",(function(e,t){var r=e.ops,o=e.version,i=e.crc32,a=t.overrideReconnectringBuffer;if(n.resolveStatusOp)return n.resolveStatusOp({ops:r,version:o}),void(n.resolveStatusOp=null);if(!n.isReconnecting||a)if(-1!==n.version)if(n.version++,o===n.version){var s="";try{s=z.type.apply(n.otContents,r)}catch(O){return void n.emit("error",new Error("OT Error: unable to apply updated content"),{originalError:O,incomingOps:r})}var c=B.str(s)>>>0;if(c===i){if(n.uncommittedOps.push({version:o,crc32:i,ops:r}),F()(r)===F()(n.inflight))return n.debounceCommit(),n.inflight=[],n.inflightOpsPromise=null,n.otContents=s,n.debounceSend(),void n.debounceSend.flush();n.isCommitting||n.emit("fileDirty"),n.debounceCommit(),n.hasUncommittedMultiplayerOps=!0;var u="";try{u=n.getLocalContent()}catch(O){return void n.emit("error",new Error("OT Error: unable to get local content"),{originalError:O})}if(n.inflight.length){var l=z.type.transform(n.inflight,r,"right");r=z.type.transform(r,n.inflight,"left"),n.inflight=l}if(n.pending.length){var f=z.type.transform(n.pending,r,"right");r=z.type.transform(r,n.pending,"left"),n.pending=f}var p=[],d=0,h=!0,b=!1,v=void 0;try{for(var m,y=g()(r);!(h=(m=y.next()).done);h=!0){var x=m.value;switch(typeof x){case"number":d+=x;break;case"string":var w=Object(Y.uniToStrPos)(u,d);p=ee(p,w>0?[w,x]:[x]),d+=Object(Y.strPosToUni)(x);break;case"object":var k=Object(Y.uniToStrPos)(u,d),E=Object(Y.uniToStrPos)(u,d+x.d)-k;p=ee(p,k>0?[k,{d:E}]:[{d:E}]);break;default:return void n.emit("error",new Error("OT Error: unknown op type"))}}}catch(C){b=!0,v=C}finally{try{h||null==y.return||y.return()}finally{if(b)throw v}}n.otContents=s,n.emit("op",p)}else n.emit("error",new Error("OT Error: crc32 mismatch"),{server:i,client:c,incomingOps:r})}else n.emit("error",new Error("OT Error: invalid server version"),{expectedVersion:n.version,receievedVersion:o,incomingOps:r});else n.emit("error",new Error("Got packet while version is still -1, expected version to be set in handleStatus"));else n.bufferedReconnectingOps.push({crc32:i,ops:r,version:o})})),Object(b.a)(Object(U.a)(n),"handleNewCursor",(function(e){n.emit("cursor",e)})),Object(b.a)(Object(U.a)(n),"handleDeleteCursor",(function(e){var t=e.id;n.emit("removeCursor",t)})),Object(b.a)(Object(U.a)(n),"handleStatus",(function(e){var t,r,o,i,a,s;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.channel){c.next=2;break}return c.abrupt("return");case 2:if(!e.linkedFile){c.next=23;break}if(null!=e.contents){c.next=6;break}return n.emit("error",new Error("expected status contents,  got null or undefined")),c.abrupt("return");case 6:if(null!=e.cursors){c.next=9;break}return n.emit("error",new Error("expected status cursors, got null or undefined")),c.abrupt("return");case 9:if(null!=e.version){c.next=12;break}return n.emit("error",new Error("expected status version, got null or undefined")),c.abrupt("return");case 12:if(!n.isReconnecting){c.next=15;break}return n.handleReconnect(e.contents,e.version),c.abrupt("return");case 15:return n.otContents=e.contents,n.version=e.version,n.emit("firstConnect"),n.emit("op",[n.otContents]),e.cursors.forEach(n.handleNewCursor),n.emit("fileDirty"),n.debounceCommit(),c.abrupt("return");case 23:return t=new k.a((function(e){return n.resolveStatusOp=e})),c.next=26,h.a.awrap(n.channel.request({otLinkFile:{file:{path:n.linkedFile},highConsistency:Boolean(window["flag-ot-high-consitency"])}}));case 26:if(!(r=c.sent).channelClosed){c.next=29;break}return c.abrupt("return");case 29:if(!r.error){c.next=32;break}return n.emit("error",new Error("link file error "+r.error)),c.abrupt("return");case 32:return c.next=34,h.a.awrap(t);case 34:if(o=c.sent,i=o.ops,a=o.version,!(i.length>1)){c.next=40;break}return n.emit("error",new Error("Expected a single status op")),c.abrupt("return");case 40:if("string"===typeof(s=i[0]||"")){c.next=44;break}return n.emit("error",new Error("Expected a status op to be an insert or empty")),c.abrupt("return");case 44:if(!n.isReconnecting){c.next=47;break}return n.handleReconnect(s,a),c.abrupt("return");case 47:n.otContents=s,n.version=a,n.committedVersion=a,n.committedContent=n.otContents,n.emit("firstConnect"),n.emit("op",i);case 53:case"end":return c.stop()}}))})),Object(b.a)(Object(U.a)(n),"handleReconnect",(function(e,t){var r,o,i,a,s,c,u,l,f,p,d,b,v,m,y,x,w,k,E,O,C,j,T,D,S,R,F,_,I,L,A,U,P,M,B,q,V,Y,H,K,G,W,Z,J,Q,$,ee,te,re;return h.a.async((function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(n.timeDisconnected){oe.next=2;break}throw new Error("wat");case 2:if(r=N()()-n.timeDisconnected,o=function(o){n.reconnectTrackedData=ne({},o,{serverVersion:t,ourVersion:n.version,ourCommittedVersion:n.committedVersion,areContentsEqual:n.otContents===e,areCommittedContentsEqual:n.committedContent===e,didReceiveOpsWhileReconnecting:Boolean(n.bufferedReconnectingOps),didEditOffline:n.didEditOffline,hasPendingOps:Boolean(n.pending.length),disconnectDuration:r})},i=function(){n.isReconnecting=!1,n.bufferedReconnectingOps=[],n.didEditOffline=!1,n.timeDisconnected=null,n.debounceSend(),n.debounceCommit(),n.emit("reconnected")},!n.inflight.length){oe.next=26;break}if(t!==n.version||n.otContents!==e){oe.next=14;break}return o({case:"has_inflight_happy_path_ops_unreached",prompted:!1}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.pending=z.type.compose(n.inflight,n.pending),n.inflight=[],n.inflightOpsPromise=null,i(),oe.abrupt("return");case 14:a=!1,s=n.otContents;try{s=z.type.apply(e,n.inflight)}catch(ie){a=!0}if(a||n.version+1!==t||s!==e){oe.next=22;break}return o({case:"has_inflight_happy_path_ops_reached",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.emit("promptUserReconnect"),oe.abrupt("return");case 22:return o({case:"has_inflight",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.emit("promptUserReconnect"),oe.abrupt("return");case 26:if(!n.hasUncommittedMultiplayerOps){oe.next=31;break}return o({case:"multiplayer",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.emit("promptUserReconnect"),oe.abrupt("return");case 31:if(n.version!==t){oe.next=41;break}if(e!==n.otContents){oe.next=37;break}return o({case:"happy_path",prompted:!1}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),i(),oe.abrupt("return");case 37:return o({case:"same_version_different_content",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.emit("promptUserReconnect"),oe.abrupt("return");case 41:if(n.committedVersion!==t){oe.next=104;break}for(c=e,oe.prev=43,u=!0,l=!1,f=void 0,oe.prev=47,p=g()(n.uncommittedOps);!(u=(d=p.next()).done);u=!0)b=d.value.ops,c=z.type.apply(c,b);oe.next=55;break;case 51:oe.prev=51,oe.t0=oe.catch(47),l=!0,f=oe.t0;case 55:oe.prev=55,oe.prev=56,u||null==p.return||p.return();case 58:if(oe.prev=58,!l){oe.next=61;break}throw f;case 61:return oe.finish(58);case 62:return oe.finish(55);case 63:oe.next=71;break;case 65:return oe.prev=65,oe.t1=oe.catch(43),o({case:"same_committed_version_unable_to_apply_ops",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.emit("promptUserReconnect"),oe.abrupt("return");case 71:if(c!==n.otContents){oe.next=100;break}for(o({case:"happy_path_uncommitted",prompted:!1}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),v=[],m=!0,y=!1,x=void 0,oe.prev=78,w=g()(n.uncommittedOps);!(m=(k=w.next()).done);m=!0)E=k.value.ops,v=z.type.compose(v,E);oe.next=86;break;case 82:oe.prev=82,oe.t2=oe.catch(78),y=!0,x=oe.t2;case 86:oe.prev=86,oe.prev=87,m||null==w.return||w.return();case 89:if(oe.prev=89,!y){oe.next=92;break}throw x;case 92:return oe.finish(89);case 93:return oe.finish(86);case 94:return n.pending=z.type.compose(v,n.pending),n.uncommittedOps=[],n.version=t,n.otContents=e,i(),oe.abrupt("return");case 100:return o({case:"same_committed_version_different_content_fixed",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.emit("promptUserReconnect"),oe.abrupt("return");case 104:if(!(n.version<t)){oe.next=211;break}return oe.next=107,h.a.awrap(n.fetchOps(n.version+1,t));case 107:for(O=oe.sent,C=!1,j=n.otContents,oe.prev=110,T=!0,D=!1,S=void 0,oe.prev=114,R=g()(O);!(T=(F=R.next()).done);T=!0)_=F.value.ops,j=z.type.apply(j,_);oe.next=122;break;case 118:oe.prev=118,oe.t3=oe.catch(114),D=!0,S=oe.t3;case 122:oe.prev=122,oe.prev=123,T||null==R.return||R.return();case 125:if(oe.prev=125,!D){oe.next=128;break}throw S;case 128:return oe.finish(125);case 129:return oe.finish(122);case 130:oe.next=135;break;case 132:oe.prev=132,oe.t4=oe.catch(110),C=!0;case 135:if(C||j!==e){oe.next=178;break}for(o({case:"happy_path_server_ahead",prompted:!1}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),I=!0,L=!1,A=void 0,oe.prev=141,U=g()(O);!(I=(P=U.next()).done);I=!0)M=P.value,n.handlePacket(M,{overrideReconnectringBuffer:!0});oe.next=149;break;case 145:oe.prev=145,oe.t5=oe.catch(141),L=!0,A=oe.t5;case 149:oe.prev=149,oe.prev=150,I||null==U.return||U.return();case 152:if(oe.prev=152,!L){oe.next=155;break}throw A;case 155:return oe.finish(152);case 156:return oe.finish(149);case 157:for(B=!0,q=!1,V=void 0,oe.prev=160,Y=g()(n.bufferedReconnectingOps);!(B=(H=Y.next()).done);B=!0)K=H.value,n.handlePacket(K,{overrideReconnectringBuffer:!0});oe.next=168;break;case 164:oe.prev=164,oe.t6=oe.catch(160),q=!0,V=oe.t6;case 168:oe.prev=168,oe.prev=169,B||null==Y.return||Y.return();case 171:if(oe.prev=171,!q){oe.next=174;break}throw V;case 174:return oe.finish(171);case 175:return oe.finish(168);case 176:return i(),oe.abrupt("return");case 178:return oe.next=180,h.a.awrap(n.fetchOps(n.committedVersion+1,t));case 180:for(G=oe.sent,W=!1,Z=n.committedContent,oe.prev=183,J=!0,Q=!1,$=void 0,oe.prev=187,ee=g()(G);!(J=(te=ee.next()).done);J=!0)re=te.value.ops,Z=z.type.apply(Z,re);oe.next=195;break;case 191:oe.prev=191,oe.t7=oe.catch(187),Q=!0,$=oe.t7;case 195:oe.prev=195,oe.prev=196,J||null==ee.return||ee.return();case 198:if(oe.prev=198,!Q){oe.next=201;break}throw $;case 201:return oe.finish(198);case 202:return oe.finish(195);case 203:oe.next=208;break;case 205:oe.prev=205,oe.t8=oe.catch(183),W=!0;case 208:return W||Z!==e||(o({case:"happy_path_uncommitted_server_ahead",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData)),n.emit("promptUserReconnect"),oe.abrupt("return");case 211:o({case:"other",prompted:!0}),Object(X.track)(X.events.FILE_RECONNECTED_STATUS2,n.reconnectTrackedData),n.emit("promptUserReconnect");case 214:case"end":return oe.stop()}}),null,null,[[43,65],[47,51,55,63],[56,,58,62],[78,82,86,94],[87,,89,93],[110,132],[114,118,122,130],[123,,125,129],[141,145,149,157],[150,,152,156],[160,164,168,176],[169,,171,175],[183,205],[187,191,195,203],[196,,198,202]])})),Object(b.a)(Object(U.a)(n),"getLocalContent",(function(){var e=Object(U.a)(n),t=e.inflight,r=e.otContents,o=e.pending,i=r;return t.length&&(i=z.type.apply(i,t)),o.length&&(i=z.type.apply(i,o)),i})),Object(b.a)(Object(U.a)(n),"fetchOps",(function(e,t){var r;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n.channel){o.next=2;break}throw new Error("No cahnnel, cannot fetch");case 2:return o.next=4,h.a.awrap(n.channel.request({otFetchRequest:{versionFrom:e,versionTo:t}}));case 4:if(!(r=o.sent).channelClosed){o.next=7;break}throw new Error("Channel closed while requesting");case 7:if(!r.error){o.next=9;break}throw new Error("Fetch ops returned an error"+r.error);case 9:if(r.otFetchResponse){o.next=11;break}throw new Error("Expected otFetchResponse");case 11:if(r.otFetchResponse.packets){o.next=13;break}throw new Error("Expected otFetchResponse.packets");case 13:return o.abrupt("return",r.otFetchResponse.packets.map((function(e){var t=e.crc32,r=e.ops,n=e.version;if(null==t)throw new Error("Expected crc32 in packet");if(null==r)throw new Error("Expected ops in packet");if(null==n)throw new Error("Expected version in packet");return{crc32:t,version:n,ops:oe(r)}})));case 14:case"end":return o.stop()}}))})),n.linkedFile=e,n.channel=null,n.inflight=[],n.inflightOpsPromise=null,n.uncommittedOps=[],n.hasUncommittedMultiplayerOps=!1,n.committedVersion=-1,n.isReconnecting=!1,n.bufferedReconnectingOps=[],n.didEditOffline=!1,n.pending=[],n.version=-1,n.otContents="",n.committedContent="",n.flushedCursorIds=[],n.pendingCursors=[],n.user=null,n.debounceSend=V()((function(){return n.sendOps()}),20,{maxWait:60}),n.debounceCommit=V()((function(){return n.commitToDisk()}),1e3,{maxWait:3e3}),n.resolveStatusOp=null,n.isCommitting=!1,n.timeDisconnected=null,n.destroy=r.openChannel({service:"ot",name:"ot:".concat(e)},(function(e){if(!e.error){var t=e.channel,r=e.context;return n.user=r.currentUser?{name:r.currentUser.username,id:r.currentUser.id}:null,n.channel=t,t.onCommand((function(e){switch(e.body){case"ot":if(!e.ot||null==e.ot.ops||null==e.ot.spookyVersion||null==e.ot.crc32)return void n.emit("error",new Error("OT Error: missing data in ot packet"),e.ot||{});var t={crc32:e.ot.crc32,ops:oe(e.ot.ops),version:e.ot.spookyVersion};return n.handlePacket(t,{overrideReconnectringBuffer:!1});case"otstatus":return n.handleStatus(e.otstatus);case"error":if(e.ref)return;return n.emit("error",new Error("Unkown protocol error OT channel"),{originalError:e.error||"Server error"});case"otNewCursor":return n.handleNewCursor(e.otNewCursor);case"otDeleteCursor":return n.handleDeleteCursor(e.otDeleteCursor)}})),function(){n.channel=null,n.isReconnecting=!0,n.debounceSend.cancel(),n.debounceCommit.cancel(),n.timeDisconnected||(n.timeDisconnected=N()())}}})),n}return Object(P.a)(t,e),Object(I.a)(t,[{key:"commitToDisk",value:function(){var e,t,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.channel){n.next=2;break}throw new Error("Tryna commit while offline");case 2:if("open"===this.channel.status){n.next=4;break}return n.abrupt("return");case 4:if(!this.isReconnecting){n.next=6;break}throw new Error("Committing while reconnecting");case 6:if(!this.isClean()){n.next=8;break}return n.abrupt("return");case 8:if(!this.isCommitting){n.next=11;break}return this.debounceCommit(),n.abrupt("return");case 11:if(this.isCommitting=!0,!this.inflightOpsPromise){n.next=19;break}return n.next=15,h.a.awrap(this.inflightOpsPromise);case 15:if(!n.sent.channelClosed){n.next=19;break}return this.isCommitting=!1,n.abrupt("return");case 19:if(!(this.pending.length>0)){n.next=32;break}if(this.debounceSend(),this.debounceSend.flush(),this.inflightOpsPromise){n.next=26;break}return this.isCommitting=!1,this.emit("error",new Error("expected inflight promise")),n.abrupt("return");case 26:return n.next=28,h.a.awrap(this.inflightOpsPromise);case 28:if(!n.sent.channelClosed){n.next=32;break}return this.isCommitting=!1,n.abrupt("return");case 32:return this.emit("commitStart"),e=this.version,t=this.otContents,n.next=37,h.a.awrap(this.channel.request({flush:{}}));case 37:if(!(r=n.sent).channelClosed){n.next=41;break}return this.isCommitting=!1,n.abrupt("return");case 41:if("ok"===r.body){n.next=45;break}return this.isCommitting=!1,this.emit("error",new Error("OT Error: unable to flush"),{originalError:r.error||r.toString()}),n.abrupt("return");case 45:return this.uncommittedOps=[],this.hasUncommittedMultiplayerOps=!1,this.committedVersion=e,this.committedContent=t,this.isClean()&&this.emit("commitClean"),this.isCommitting=!1,n.abrupt("return",r);case 52:case"end":return n.stop()}}),null,this)}}]),t}(M.EventEmitter);function ae(e,t){var r=x()(e);if(p.a){var n=p()(e);t&&(n=n.filter((function(t){return l()(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object(b.a)(e,t,r[t])})):c.a?a()(e,c()(r)):ae(Object(r)).forEach((function(t){o()(e,t,l()(r,t))}))}return e}function ce(e){return!!e.includes("no such file")||!!e.includes("file does not exist")}function ue(e){return ce(e)?O.e.NotFound:e.includes("file exist")?O.e.AlreadyExists:e.includes("not a directory")?O.e.NotDirectory:void 0}function le(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new k.a((function(t,n){setTimeout((function(){e.apply(void 0,r).then(t).catch(n)}),0)}))}function fe(e){var t,r=e.container,n=null,o={},i={};r.openChannel({service:"fsevents"},(function(e){var t=e.error,r=e.channel;if(!t){if(!r)throw new Error("Expected channel");n=r,r.onCommand((function(e){if("fileEvent"===e.body){if(!e.fileEvent)throw new Error("Expected fileEvent");var t=e.fileEvent,r=t.file,n=t.dest,i=t.op;if(r){var a=r.path;if(null!==a&&null!==i&&void 0!==a&&void 0!==i){var c;if(o[a]||r.type===D.api.File.Type.DIRECTORY)c=O.d.Directory;else{var u=x()(o).find((function(e){return Object(j.b)(e,a)})),l=u&&o[u].children.find((function(e){return e.filename===a.split("/").pop()}));c=l?l.type:O.d.File}switch(i){case D.api.FileEvent.Op.Create:s({eventType:O.a.Create,node:{path:a,type:c}});break;case D.api.FileEvent.Op.Modify:if(c===O.d.Directory)break;break;case D.api.FileEvent.Op.Remove:s({eventType:O.a.Delete,node:{path:a,type:c}});break;case D.api.FileEvent.Op.Move:if(null==n||null==n.path)throw new Error("Expected dest path");var f=n.path;s({eventType:O.a.Create,node:{path:f,type:c}}),s({eventType:O.a.Delete,node:{path:a,type:c}})}}}}}));var a=[].concat(Object(m.a)(x()(o).map((function(e){return{path:e}}))),Object(m.a)(x()(i).map((function(e){return{path:e}}))));return a.length&&r.send({subscribeFile:{files:a}}),function(){n=null}}}));var a=new k.a((function(e){return t=e}));function s(e){var t=e.node.type===O.d.Directory?o[e.node.path]:i[e.node.path];if(t)switch(e.eventType){case O.a.Create:break;case O.a.Move:case O.a.Delete:var r=!0,n=!1,a=void 0;try{for(var s,c=g()(t.listeners);!(r=(s=c.next()).done);r=!0){var u=s.value,l=u.onMoveOrDelete,f=u.dispose;l&&l(e),f()}}catch(G){n=!0,a=G}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}break;case O.a.Modify:}var p=e.node.path.includes("/")?Object(C.e)(e.node.path):T.a,d=o[p];if(d)switch(e.eventType){case O.a.Create:var h=e.node.path.split("/").pop();if(!h)throw new Error("Expected filename");var b=[].concat(Object(m.a)(d.children.filter((function(e){return e.filename!==h}))),[{type:e.node.type,filename:h}]),v=!0,y=!1,x=void 0;try{for(var w,k=g()(d.listeners);!(v=(w=k.next()).done);v=!0){(0,w.value.onChange)(b)}}catch(G){y=!0,x=G}finally{try{v||null==k.return||k.return()}finally{if(y)throw x}}d.children=b;break;case O.a.Move:var E=d.children.filter((function(t){return t.filename!==e.node.path})),j=!0,D=!1,S=void 0;try{for(var N,R=g()(d.listeners);!(j=(N=R.next()).done);j=!0){(0,N.value.onChange)(E)}}catch(G){D=!0,S=G}finally{try{j||null==R.return||R.return()}finally{if(D)throw S}}d.children=E;var F=e.to.split("/").slice(0,-1).join("/"),_=o[F];if(!_)return;var I={filename:e.node.path,type:e.node.type},L=[].concat(Object(m.a)(_.children),[I]),A=!0,U=!1,P=void 0;try{for(var M,B=g()(_.listeners);!(A=(M=B.next()).done);A=!0){(0,M.value.onChange)(L)}}catch(G){U=!0,P=G}finally{try{A||null==B.return||B.return()}finally{if(U)throw P}}_.children=L;break;case O.a.Delete:var z=e.node.path.split("/").pop(),q=d.children.filter((function(e){return e.filename!==z})),V=!0,Y=!1,X=void 0;try{for(var H,K=g()(d.listeners);!(V=(H=K.next()).done);V=!0){(0,H.value.onChange)(q)}}catch(G){Y=!0,X=G}finally{try{V||null==K.return||K.return()}finally{if(Y)throw X}}d.children=q;break;default:throw new Error("unknown event")}}r.openChannel({service:function(e){return e.repl.currentUserPermissions.containerWrite?"gcsfiles":"files"}},(function(e){var r=e.error,n=e.channel;if(!r){if(!n)throw new Error("Expected channel");return t(n),function(){a=new k.a((function(e){return t=e}))}}}));var c={watchDir:function(e,t){var r=!1,i=function t(){r=!0,o[e]&&(o[e].listeners=o[e].listeners.filter((function(e){return e.dispose!==t})),0===o[e].listeners.length&&delete o[e])};return c.readDir(e).then((function(a){if(!r){if(a.error){var s=new Error(a.error);return s.code=a.error,t.onError(s),void i()}o[e]||(o[e]={path:e,type:O.d.Directory,children:a.children,listeners:[]},n&&n.send({subscribeFile:{files:[{path:e}]}})),o[e].listeners.push(se({},t,{dispose:i})),t.onChange(a.children)}})).catch((function(e){i(),t.onError(e)})),i},writeFile:function(e,t){var r,n,o;return h.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,h.a.awrap(a);case 2:return r=i.sent,i.next=5,h.a.awrap(r.request({write:{path:e,content:t.toBuffer()}}));case 5:if(!(n=i.sent).channelClosed){i.next=8;break}return i.abrupt("return",le(c.writeFile,e,t));case 8:if(!n.error){i.next=14;break}if(o=null,n.error.includes("not a directory")?o=O.e.NotDirectory:n.error.includes("file exists")&&(o=O.e.IsDirectory),o){i.next=13;break}throw new Error(n.error);case 13:return i.abrupt("return",{error:o});case 14:return s({eventType:O.a.Create,node:{path:e,type:O.d.File}}),i.abrupt("return",{error:null});case 16:case"end":return i.stop()}}))},readFile:function(e){var t,r,n;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(a);case 2:return t=o.sent,o.next=5,h.a.awrap(t.request({read:{path:e}}));case 5:if(!(r=o.sent).channelClosed){o.next=8;break}return o.abrupt("return",le(c.readFile,e));case 8:if(!r.error){o.next=14;break}if(n=null,ce(r.error)?n=O.e.NotFound:r.error.includes("is a directory")&&(n=O.e.IsDirectory),n){o.next=13;break}throw new Error(r.error);case 13:return o.abrupt("return",{error:n});case 14:if(r.file&&r.file.path&&r.file.content){o.next=16;break}throw new Error("Expected file");case 16:return o.abrupt("return",{content:E.a.from(r.file.content),error:null});case 17:case"end":return o.stop()}}))},createDir:function(e){var t,r,n;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(a);case 2:return t=o.sent,o.next=5,h.a.awrap(t.request({mkdir:{path:e}}));case 5:if(!(r=o.sent).channelClosed){o.next=8;break}return o.abrupt("return",le(c.createDir,e));case 8:if(!r.error){o.next=14;break}if(n=null,r.error.includes("not a directory")&&(n=O.e.NotDirectory),n){o.next=13;break}throw new Error(r.error);case 13:return o.abrupt("return",{error:n});case 14:return s({eventType:O.a.Create,node:{path:e,type:O.d.Directory}}),o.abrupt("return",{error:null});case 16:case"end":return o.stop()}}))},moveDir:function(e,t){var r,n,o;return h.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,h.a.awrap(a);case 2:return r=i.sent,i.next=5,h.a.awrap(r.request({move:{oldPath:e,newPath:t}}));case 5:if(!(n=i.sent).channelClosed){i.next=8;break}return i.abrupt("return",le(c.moveDir,e,t));case 8:if(!n.error){i.next=13;break}if(o=ue(n.error)){i.next=12;break}throw new Error(n.error);case 12:return i.abrupt("return",{error:o});case 13:return s({eventType:O.a.Create,node:{path:t,type:O.d.Directory}}),s({eventType:O.a.Delete,node:{path:e,type:O.d.Directory}}),i.abrupt("return",{error:null});case 16:case"end":return i.stop()}}))},moveFile:function(e,t){var r,n,o;return h.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,h.a.awrap(a);case 2:return r=i.sent,i.next=5,h.a.awrap(r.request({move:{oldPath:e,newPath:t}}));case 5:if(!(n=i.sent).channelClosed){i.next=8;break}return i.abrupt("return",le(c.moveFile,e,t));case 8:if(!n.error){i.next=13;break}if(o=ue(n.error)){i.next=12;break}throw new Error(n.error);case 12:return i.abrupt("return",{error:o});case 13:return s({eventType:O.a.Create,node:{path:t,type:O.d.File}}),s({eventType:O.a.Delete,node:{path:e,type:O.d.File}}),i.abrupt("return",{error:null});case 16:case"end":return i.stop()}}))},deleteFile:function(e){var t,r,n;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(a);case 2:return t=o.sent,o.next=5,h.a.awrap(t.request({remove:{path:e}}));case 5:if(!(r=o.sent).channelClosed){o.next=8;break}return o.abrupt("return",le(c.deleteFile,e));case 8:if(!r.error){o.next=14;break}if(n=null,ce(r.error)&&(n=O.e.NotFound),n){o.next=13;break}throw new Error(r.error);case 13:return o.abrupt("return",{error:n});case 14:return s({eventType:O.a.Delete,node:{path:e,type:O.d.File}}),o.abrupt("return",{error:null});case 16:case"end":return o.stop()}}))},deleteDir:function(e){var t,r,n;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(a);case 2:return t=o.sent,o.next=5,h.a.awrap(t.request({remove:{path:e}}));case 5:if(!(r=o.sent).channelClosed){o.next=8;break}return o.abrupt("return",le(c.deleteDir,e));case 8:if(!r.error){o.next=14;break}if(n=null,ce(r.error)&&(n=O.e.NotFound),n){o.next=13;break}throw new Error(r.error);case 13:return o.abrupt("return",{error:n});case 14:return s({eventType:O.a.Delete,node:{path:e,type:O.d.Directory}}),o.abrupt("return",{error:null});case 16:case"end":return o.stop()}}))},readDir:function(e){var t,r,n,o,i;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(a);case 2:return r=s.sent,s.next=5,h.a.awrap(r.request({readdir:{path:e}}));case 5:if(!(n=s.sent).channelClosed){s.next=8;break}return s.abrupt("return",le(c.readDir,e));case 8:if(!n.error){s.next=14;break}if(o=null,ce(n.error)?o=O.e.NotFound:n.error.includes("not a directory")&&(o=O.e.NotDirectory),o){s.next=13;break}throw new Error(n.error);case 13:return s.abrupt("return",{error:o});case 14:if(null===(t=n.files)||void 0===t?void 0:t.files){s.next=16;break}throw new Error("Expected filesChannel");case 16:return i=n.files.files.map((function(e){if(!e.path)throw new Error("Expected path");return{filename:e.path,type:e.type===D.api.File.Type.DIRECTORY?O.d.Directory:O.d.File}})),s.abrupt("return",{children:i,error:null});case 18:case"end":return s.stop()}}))},stat:function(e){var t,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(a);case 2:return t=n.sent,n.next=5,h.a.awrap(t.request({stat:{path:e}}));case 5:if(!(r=n.sent).channelClosed){n.next=8;break}return n.abrupt("return",le(c.stat,e));case 8:if(!r.error){n.next=10;break}throw new Error(r.error);case 10:if(r.statRes){n.next=12;break}throw new Error("expected stat result");case 12:if(r.statRes.exists){n.next=14;break}return n.abrupt("return",{exists:!1});case 14:if(r.statRes.type!==D.api.File.Type.DIRECTORY){n.next=16;break}return n.abrupt("return",{exists:!0,type:O.d.Directory,lastModified:new Date(1e3*r.statRes.modTime)});case 16:return n.abrupt("return",{exists:!0,type:O.d.File,lastModified:new Date(1e3*r.statRes.modTime),byteLength:Number(r.statRes.size)});case 17:case"end":return n.stop()}}))},watchOtFile:function(e,t){var n=this;i[e]||(i[e]={path:e,type:O.d.File,listeners:[],otClient:new ie(e,r)});var o=!1,a=function(){},s=function(s){a();var u=function(){var e;return null===(e=t.onStatusChange)||void 0===e?void 0:e.call(t,O.c.Dirty)};i[e].otClient.on("fileDirty",u);var l=function(){var e;return null===(e=t.onStatusChange)||void 0===e?void 0:e.call(t,O.c.Clean)};i[e].otClient.on("commitClean",l);var f=function(){var e;return null===(e=t.onStatusChange)||void 0===e?void 0:e.call(t,O.c.Syncing)};i[e].otClient.on("commitStart",f);var p=function(t){var o,a,s,c,u,l,f,p,d,b;return h.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if((o=i[e].otClient).destroy(),a=function(){var t=new ie(e,r);return new k.a((function(r,n){t.once("op",(function(){var n=te(o.getLocalContent(),t.getLocalContent());i[e].otClient=t;var a=!0,s=!1,u=void 0;try{for(var l,f=g()(i[e].listeners);!(a=(l=f.next()).done);a=!0){(0,l.value.reregister)(n)}}catch(c){s=!0,u=c}finally{try{a||null==f.return||f.return()}finally{if(s)throw u}}r()})),t.once("error",(function(e){return n(e)}))}))},"remote"!==t){v.next=7;break}return v.next=6,h.a.awrap(a());case 6:return v.abrupt("return");case 7:return v.next=9,h.a.awrap(n.writeFile(e,E.a.from(o.getLocalContent())));case 9:if(!(s=v.sent).error){v.next=33;break}for((c=new Error("Got error while overwriting file during reconnect")).code=s.error,u=!0,l=!1,f=void 0,v.prev=16,p=g()(i[e].listeners);!(u=(d=p.next()).done);u=!0)(b=d.value).onError&&b.onError(c),b.dispose();v.next=24;break;case 20:v.prev=20,v.t0=v.catch(16),l=!0,f=v.t0;case 24:v.prev=24,v.prev=25,u||null==p.return||p.return();case 27:if(v.prev=27,!l){v.next=30;break}throw f;case 30:return v.finish(27);case 31:return v.finish(24);case 32:return v.abrupt("return");case 33:return v.next=35,h.a.awrap(a());case 35:case"end":return v.stop()}}),null,null,[[16,20,24,32],[25,,27,31]])};i[e].otClient.on("promptUserReconnect",(function(){var e;return null===(e=t.onReconnectFail)||void 0===e?void 0:e.call(t,p)}));var d=function(e){t.onError&&t.onError(e),c()};i[e].otClient.on("error",d);var b=function(r){i[e].otClient.writeOps(r);var n=!0,o=!1,a=void 0;try{for(var s,c=g()(i[e].listeners);!(n=(s=c.next()).done);n=!0){var u=s.value.onChange;u&&u!==t.onChange&&u({ops:r,changeSource:O.b.Local})}}catch(l){o=!0,a=l}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}};if(-1!==i[e].otClient.version&&setTimeout((function(){var r;o||null===(r=t.onReady)||void 0===r||r.call(t,{initialContent:E.a.from(i[e].otClient.getLocalContent()),writeOps:b,fetchOps:i[e].otClient.fetchOps,version:i[e].otClient.version})})),s){var v;null===(v=t.onChange)||void 0===v||v.call(t,{ops:s,changeSource:O.b.Container})}else{var m=function(r){var n,a;if(!o)return o=!0,void(null===(a=t.onReady)||void 0===a||a.call(t,{initialContent:E.a.from(i[e].otClient.getLocalContent()),writeOps:b,fetchOps:i[e].otClient.fetchOps,version:i[e].otClient.version}));null===(n=t.onChange)||void 0===n||n.call(t,{ops:r,changeSource:O.b.Container})};i[e].otClient.on("op",m),a=function(){i[e].otClient.removeListener("fileDirty",u),i[e].otClient.removeListener("commitClean",l),i[e].otClient.removeListener("commitStart",f),i[e].otClient.removeListener("error",d),i[e].otClient.removeListener("op",m)}}};s();var c=function t(){i[e]&&(o=!0,a(),i[e].listeners=i[e].listeners.filter((function(e){return e.dispose!==t})),0===i[e].listeners.length&&(i[e].otClient.destroy(),delete i[e]))};return i[e].listeners.push(se({},t,{dispose:c,reregister:s})),c}};return c}r.d(t,"a",(function(){return fe}))},VZNv:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("ln6h"),o=r.n(n),i=r("0gYX"),a=r.n(i),s=r("5/z4"),c=r("HADy"),u=r("Fz/E"),l=r("6bXu");function f(e){var t=e.container,r=e.beforeRun,n=Object(u.a)(),i=null,f=c.b.OFFLINE,p="none",d=!1,h=Math.random();function b(){var e=function(e){f!==e&&(f=e,n.emit(c.a.STATE_CHANGE,f))};e(i?d?c.b.STOPPING:"none"===p?c.b.IDLE:c.b.RUNNING:c.b.OFFLINE)}return t.openChannel({name:"shellrunner",service:"shellrun2",skip:function(e){var t,r=e.repl;return!Object(l.a)()||(t=r.language,!(!0===a.a.usesInterpreter(t)||!1!==a.a.usesRunProject(t)))}},(function(e){var t=e.channel;if(!e.error){if(!t)throw new Error("Expected error");return i=t,b(),t.onCommand((function(e){switch(e.body){case"state":var t=e.state===s.api.State.Stopped;d&&t&&(d=!1),t?"server"===p&&(p="none"):p="server",b();break;case"output":n.emit(c.a.OUTPUT,e.output)}})),function(){p="none",d=!1,i=null,b()}}})),{run:function(){var e;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(f===c.b.IDLE){t.next=2;break}throw new Error("Cannot run while state is not IDLE, got state: "+f);case 2:return e=Math.random(),h=e,p="before-run",b(),t.next=8,o.a.awrap(r());case 8:if(h===e){t.next=10;break}return t.abrupt("return");case 10:if("none"!==p){t.next=12;break}return t.abrupt("return");case 12:if("server"!==p){t.next=14;break}return t.abrupt("return");case 14:if(i){t.next=16;break}throw new Error("State is RUNNING but shellrunner is null?");case 16:p="optimistic",i.send({runMain:{}});case 18:case"end":return t.stop()}}))},stopRun:function(){if(f!==c.b.RUNNING)throw new Error("stopRun must be called when running but got ".concat(f));if(!i)throw new Error("State is RUNNING but shellrunner is null?");if("before-run"===p)return p="none",void b();p="none",d=!0,b(),i.send({clear:{}})},sendInput:function(e){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(f===c.b.IDLE||f===c.b.RUNNING){t.next=2;break}throw new Error("Can only send input when running or idle");case 2:if(i){t.next=4;break}throw new Error("State is not OFFLINE but shellrunner is null?");case 4:i.send({input:e});case 5:case"end":return t.stop()}}))},resizeTerminal:function(e){if(!i)throw new Error("resizeTerminal must be called when online");i.send({resizeTerm:e})},onOutput:function(e){return n.on(c.a.OUTPUT,e),function(){n.removeListener(c.a.OUTPUT,e)}},onStateChanged:function(e){return n.on(c.a.STATE_CHANGE,e),function(){n.removeListener(c.a.STATE_CHANGE,e)}},getRunState:function(){return f}}}},Yk1I:function(e,t){var r=-1,n=1,o=0;function i(e,t,u,l){if(e===t)return e?[[o,e]]:[];if(null!=u){var h=function(e,t,r){var n="number"===typeof r?{index:r,length:0}:r.oldRange,o="number"===typeof r?null:r.newRange,i=e.length,a=t.length;if(0===n.length&&(null===o||0===o.length)){var s=n.index,c=e.slice(0,s),u=e.slice(s),l=o?o.index:null,f=s+a-i;if((null===l||l===f)&&!(f<0||f>a)){var p=t.slice(0,f);if((x=t.slice(f))===u){var h=Math.min(s,f),b=c.slice(0,h),v=p.slice(0,h);if(b===v){var g=c.slice(h),m=p.slice(h);return d(b,g,m,u)}}}if(null===l||l===s){var y=s,x=(p=t.slice(0,y),t.slice(y));if(p===c){var w=Math.min(i-y,a-y),k=u.slice(u.length-w),E=x.slice(x.length-w);if(k===E){g=u.slice(0,u.length-w),m=x.slice(0,x.length-w);return d(c,g,m,k)}}}}if(n.length>0&&o&&0===o.length){b=e.slice(0,n.index),k=e.slice(n.index+n.length),h=b.length,w=k.length;if(!(a<h+w)){v=t.slice(0,h),E=t.slice(a-w);if(b===v&&k===E){g=e.slice(h,i-w),m=t.slice(h,a-w);return d(b,g,m,k)}}}return null}(e,t,u);if(h)return h}var b=s(e,t),v=e.substring(0,b);b=c(e=e.substring(b),t=t.substring(b));var g=e.substring(e.length-b),m=function(e,t){var u;if(!e)return[[n,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,f=e.length>t.length?t:e,p=l.indexOf(f);if(-1!==p)return u=[[n,l.substring(0,p)],[o,f],[n,l.substring(p+f.length)]],e.length>t.length&&(u[0][0]=u[2][0]=r),u;if(1===f.length)return[[r,e],[n,t]];var d=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function o(e,t,r){for(var n,o,i,a,u=e.substring(r,r+Math.floor(e.length/4)),l=-1,f="";-1!==(l=t.indexOf(u,l+1));){var p=s(e.substring(r),t.substring(l)),d=c(e.substring(0,r),t.substring(0,l));f.length<d+p&&(f=t.substring(l-d,l)+t.substring(l,l+p),n=e.substring(0,r-d),o=e.substring(r+p),i=t.substring(0,l-d),a=t.substring(l+p))}return 2*f.length>=e.length?[n,o,i,a,f]:null}var i,a,u,l,f,p=o(r,n,Math.ceil(r.length/4)),d=o(r,n,Math.ceil(r.length/2));if(!p&&!d)return null;i=d?p&&p[4].length>d[4].length?p:d:p;e.length>t.length?(a=i[0],u=i[1],l=i[2],f=i[3]):(l=i[0],f=i[1],a=i[2],u=i[3]);var h=i[4];return[a,u,l,f,h]}(e,t);if(d){var h=d[0],b=d[1],v=d[2],g=d[3],m=d[4],y=i(h,v),x=i(b,g);return y.concat([[o,m]],x)}return function(e,t){for(var o=e.length,i=t.length,s=Math.ceil((o+i)/2),c=s,u=2*s,l=new Array(u),f=new Array(u),p=0;p<u;p++)l[p]=-1,f[p]=-1;l[c+1]=0,f[c+1]=0;for(var d=o-i,h=d%2!==0,b=0,v=0,g=0,m=0,y=0;y<s;y++){for(var x=-y+b;x<=y-v;x+=2){for(var w=c+x,k=(T=x===-y||x!==y&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1)-x;T<o&&k<i&&e.charAt(T)===t.charAt(k);)T++,k++;if(l[w]=T,T>o)v+=2;else if(k>i)b+=2;else if(h){if((C=c+d-x)>=0&&C<u&&-1!==f[C]){var E=o-f[C];if(T>=E)return a(e,t,T,k)}}}for(var O=-y+g;O<=y-m;O+=2){for(var C=c+O,j=(E=O===-y||O!==y&&f[C-1]<f[C+1]?f[C+1]:f[C-1]+1)-O;E<o&&j<i&&e.charAt(o-E-1)===t.charAt(i-j-1);)E++,j++;if(f[C]=E,E>o)m+=2;else if(j>i)g+=2;else if(!h){if((w=c+d-O)>=0&&w<u&&-1!==l[w]){var T=l[w];k=c+T-w;if(T>=(E=o-E))return a(e,t,T,k)}}}}return[[r,e],[n,t]]}(e,t)}(e=e.substring(0,e.length-b),t=t.substring(0,t.length-b));return v&&m.unshift([o,v]),g&&m.push([o,g]),function e(t,i){t.push([o,""]);var a,u=0,l=0,d=0,h="",b="";for(;u<t.length;)if(u<t.length-1&&!t[u][1])t.splice(u,1);else switch(t[u][0]){case n:d++,b+=t[u][1],u++;break;case r:l++,h+=t[u][1],u++;break;case o:var v=u-d-l-1;if(i){if(v>=0&&p(t[v][1])){var g=t[v][1].slice(-1);if(t[v][1]=t[v][1].slice(0,-1),h=g+h,b=g+b,!t[v][1]){t.splice(v,1),u--;var m=v-1;t[m]&&t[m][0]===n&&(d++,b=t[m][1]+b,m--),t[m]&&t[m][0]===r&&(l++,h=t[m][1]+h,m--),v=m}}if(f(t[u][1])){g=t[u][1].charAt(0);t[u][1]=t[u][1].slice(1),h+=g,b+=g}}if(u<t.length-1&&!t[u][1]){t.splice(u,1);break}if(h.length>0||b.length>0){h.length>0&&b.length>0&&(0!==(a=s(b,h))&&(v>=0?t[v][1]+=b.substring(0,a):(t.splice(0,0,[o,b.substring(0,a)]),u++),b=b.substring(a),h=h.substring(a)),0!==(a=c(b,h))&&(t[u][1]=b.substring(b.length-a)+t[u][1],b=b.substring(0,b.length-a),h=h.substring(0,h.length-a)));var y=d+l;0===h.length&&0===b.length?(t.splice(u-y,y),u-=y):0===h.length?(t.splice(u-y,y,[n,b]),u=u-y+1):0===b.length?(t.splice(u-y,y,[r,h]),u=u-y+1):(t.splice(u-y,y,[r,h],[n,b]),u=u-y+2)}0!==u&&t[u-1][0]===o?(t[u-1][1]+=t[u][1],t.splice(u,1)):u++,d=0,l=0,h="",b=""}""===t[t.length-1][1]&&t.pop();var x=!1;u=1;for(;u<t.length-1;)t[u-1][0]===o&&t[u+1][0]===o&&(t[u][1].substring(t[u][1].length-t[u-1][1].length)===t[u-1][1]?(t[u][1]=t[u-1][1]+t[u][1].substring(0,t[u][1].length-t[u-1][1].length),t[u+1][1]=t[u-1][1]+t[u+1][1],t.splice(u-1,1),x=!0):t[u][1].substring(0,t[u+1][1].length)==t[u+1][1]&&(t[u-1][1]+=t[u+1][1],t[u][1]=t[u][1].substring(t[u+1][1].length)+t[u+1][1],t.splice(u+1,1),x=!0)),u++;x&&e(t,i)}(m,l),m}function a(e,t,r,n){var o=e.substring(0,r),a=t.substring(0,n),s=e.substring(r),c=t.substring(n),u=i(o,a),l=i(s,c);return u.concat(l)}function s(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(i,o)==t.substring(i,o)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return u(e.charCodeAt(o-1))&&o--,o}function c(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return l(e.charCodeAt(e.length-o))&&o--,o}function u(e){return e>=55296&&e<=56319}function l(e){return e>=56320&&e<=57343}function f(e){return l(e.charCodeAt(0))}function p(e){return u(e.charCodeAt(e.length-1))}function d(e,t,i,a){return p(e)||f(a)?null:function(e){for(var t=[],r=0;r<e.length;r++)e[r][1].length>0&&t.push(e[r]);return t}([[o,e],[r,t],[n,i],[o,a]])}function h(e,t,r){return i(e,t,r,!0)}h.INSERT=n,h.DELETE=r,h.EQUAL=o,e.exports=h},Z5Wq:function(e,t,r){"use strict";r("hfKm")(t,"__esModule",{value:!0}),t.strPosToUni=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=0,n=0;n<t;n++){var o=e.charCodeAt(n);o>=55296&&o<=57343&&(r++,n++)}if(n!==t)throw Error("Invalid offset - splits unicode bytes");return n-r},t.uniToStrPos=function(e,t){for(var r=0;t>0;t--){var n=e.charCodeAt(r);r+=n>=55296&&n<=57343?2:1}return r}},cC09:function(e,t,r){var n;n=function(e){e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();e.table=t,e.bstr=function(e,r){for(var n=-1^r,o=e.length-1,i=0;i<o;)n=(n=n>>>8^t[255&(n^e.charCodeAt(i++))])>>>8^t[255&(n^e.charCodeAt(i++))];return i===o&&(n=n>>>8^t[255&(n^e.charCodeAt(i))]),-1^n},e.buf=function(e,r){if(e.length>1e4)return function(e,r){for(var n=-1^r,o=e.length-7,i=0;i<o;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])];for(;i<o+7;)n=n>>>8^t[255&(n^e[i++])];return-1^n}(e,r);for(var n=-1^r,o=e.length-3,i=0;i<o;)n=(n=(n=(n=n>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])];for(;i<o+3;)n=n>>>8^t[255&(n^e[i++])];return-1^n},e.str=function(e,r){for(var n,o,i=-1^r,a=0,s=e.length;a<s;)(n=e.charCodeAt(a++))<128?i=i>>>8^t[255&(i^n)]:n<2048?i=(i=i>>>8^t[255&(i^(192|n>>6&31))])>>>8^t[255&(i^(128|63&n))]:n>=55296&&n<57344?(n=64+(1023&n),o=1023&e.charCodeAt(a++),i=(i=(i=(i=i>>>8^t[255&(i^(240|n>>8&7))])>>>8^t[255&(i^(128|n>>2&63))])>>>8^t[255&(i^(128|o>>6&15|(3&n)<<4))])>>>8^t[255&(i^(128|63&o))]):i=(i=(i=i>>>8^t[255&(i^(224|n>>12&15))])>>>8^t[255&(i^(128|n>>6&63))])>>>8^t[255&(i^(128|63&n))];return-1^i}},"undefined"===typeof DO_NOT_EXPORT_CRC?n(t):n({})},"cHV+":function(e,t,r){"use strict";var n=r("Qetd"),o=r("hfKm"),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};o(t,"__esModule",{value:!0});var a=r("Z5Wq"),s=i(r("HtvZ")),c=i(r("qpVQ")),u={create:function(e){return e},toString:function(e){return e},builder:function(e){if("string"!==typeof e)throw Error("Invalid document snapshot: "+e);var t=[];return{skip:function(r){var n=a.uniToStrPos(e,r);if(n>e.length)throw Error("The op is too long for this document");t.push(e.slice(0,n)),e=e.slice(n)},append:function(e){t.push(e)},del:function(t){e=e.slice(a.uniToStrPos(e,t))},build:function(){return t.join("")+e}}}},l=n({},s.default(u),{api:c.default});t.type=l;var f=r("HtvZ");t.makeType=f.default},gfZM:function(e,t,r){"use strict";(function(e){var n=r("0iUn"),o=r("sLSF"),i=function(){function t(r,o){if(Object(n.a)(this,t),this.asEncoding={},this.asBuffer=null,o&&"string"===typeof r)this.asEncoding[o]=r;else if(void 0===r||null===r)this.asBuffer=e.alloc(0);else if(r instanceof e)this.asBuffer=r;else if("string"===typeof r)this.asEncoding.utf8=r;else if(r instanceof ArrayBuffer)this.asBuffer=e.from(r);else{if(r instanceof t)return r;r instanceof Uint8Array?this.asBuffer=e.from(r):"object"===typeof r&&"object"===typeof r.asEncoding&&null!==r.asEncoding&&(r.asBuffer instanceof e||null===r.asBuffer)&&(this.asBuffer=r.asBuffer||null,"string"===typeof r.asEncoding.base64&&(this.asEncoding={base64:r.asEncoding.base64}),"string"===typeof r.asEncoding.utf8&&(this.asEncoding={utf8:r.asEncoding.utf8}))}}return Object(o.a)(t,null,[{key:"from",value:function(e,r){return new t(e,r)}},{key:"isBuffer",value:function(e){return e instanceof t}}]),Object(o.a)(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var t=this.toBuffer(),r=t.toString(e);return this.asEncoding[e]=r,r}},{key:"toJSON",value:function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}}},{key:"toBuffer",value:function(){if(this.asBuffer)return this.asBuffer;for(var t in this.asEncoding){var r=this.asEncoding[t];if("string"===typeof r){var n=e.from(r,t);return this.asBuffer=n,n}}return this.asBuffer=e.alloc(0),this.asBuffer}},{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}}]),t}();t.a=i}).call(this,r("HDXh").Buffer)},qpVQ:function(e,t,r){"use strict";r("hfKm")(t,"__esModule",{value:!0});var n=r("Z5Wq");function o(e,t){return{get:e,getLength:function(){return e().length},insert:function(r,o,i){var a=n.strPosToUni(e(),r);return t([a,o],i)},remove:function(r,o,i){var a=n.strPosToUni(e(),r);return t([a,{d:o}],i)},_onOp:function(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];switch(typeof n){case"number":t+=n,n;break;case"string":this.onInsert&&this.onInsert(t,n),t+=n.length;break;case"object":this.onRemove&&this.onRemove(t,n.d),n.d}}},onInsert:null,onRemove:null}}t.default=o,o.provides={text:!0}},tidx:function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var n=r("hfKm"),o=r.n(n),i=r("2Eek"),a=r.n(i),s=r("XoMD"),c=r.n(s),u=r("Jo+v"),l=r.n(u),f=r("4mXO"),p=r.n(f),d=r("pLtp"),h=r.n(d),b=r("vYYK"),v=r("0iUn"),g=r("sLSF"),m=r("MI3g"),y=r("a7VT"),x=r("Tit0"),w=r("MX0m"),k=r.n(w),E=r("q1tI"),O=r("xom/"),C=r("2tbh"),j=E.createElement;function T(e,t){var r=h()(e);if(p.a){var n=p()(e);t&&(n=n.filter((function(t){return l()(e,t).enumerable}))),r.push.apply(r,n)}return r}var D=function(e){function t(){var e,r;Object(v.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(r=Object(m.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(i)))).state={isLogin:!!r.props.showLoginFirst},r.handleChangeAuth=function(){r.setState((function(e){return{isLogin:!e.isLogin}}))},r.handleSubmit=function(e){e.error&&r.props.onFailure(e),e.user&&r.props.onSuccess(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){Object(b.a)(e,t,r[t])})):c.a?a()(e,c()(r)):T(Object(r)).forEach((function(t){o()(e,t,l()(r,t))}))}return e}({},e,{isLogin:r.state.isLogin}))},r}return Object(x.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return j("div",{className:"jsx-101910848 auth-modal"},j(O.b,{align:"center",spacing:2},j("div",{className:"jsx-101910848 auth-modal-title"},this.props.title||"Sign up"),j("div",{className:"jsx-101910848 auth-modal-description"},this.props.description||"Code, create, and learn together on Replit"),j(C.a,{onChangeAuth:this.handleChangeAuth,isTeacher:this.props.isTeacher,isLogin:this.state.isLogin,onSubmit:this.handleSubmit}),this.props.allowAnon&&j("div",{className:"jsx-101910848 auth-modal-anon"},j("a",{onClick:function(){return e.props.onSuccess()},className:"jsx-101910848"},"continue as Anonymous"))),j(k.a,{id:"101910848"},[".auth-modal.jsx-101910848{max-width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--spacing-4) var(--spacing-2);}",".title-container.jsx-101910848{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:var(--spacing-2);}",".auth-modal-title.jsx-101910848{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;color:var(--color-foreground-1);font-size:var(--font-size-desktop-heading-2);font-weight:var(--font-weight-medium);}",".auth-modal-description.jsx-101910848{text-align:center;color:var(--color-foreground-2);font-size:var(--font-size-deskptop-text-medium);}",".auth-modal-anon.jsx-101910848{margin-top:14px;font-size:14px;}",".auth-modal-anon.jsx-101910848 a.jsx-101910848{color:var(--color-primary-1);-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}"]))}}]),t}(E.Component);D.defaultProps={showLoginFirst:!1,isTeacher:!1,allowAnon:!1,onSuccess:function(){},onFailure:function(){}}}}]);
//# sourceMappingURL=862152788b3a08dd802a874cb7c466bdb3da3bca.f7effee93b1224286c7c.js.map